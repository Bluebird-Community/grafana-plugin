{"version":3,"sources":["../../../../src/datasources/fault-ds/ui/Clause.js"],"names":["_","UI","Clause","uiSegmentSrv","operator","restriction","RestrictionDTO","Restriction","controls","setOperator","newOperator","newCondition","value","query","Controls","RemoveControl","AddControl","AddNestedControl","self","filter","control","Query","updateControls"],"mappings":";;;;;;;;;;;;;;;AAAOA,a;;AACCC,c,OAAAA,E;;;;;;;;;;;;;;;;;;;;;8BAEKC,M;AAET,gCAAYC,YAAZ,EAA0BC,QAA1B,EAAoCC,WAApC,EAAiD;AAAA;;AAC7C,wBAAIA,uBAAuBJ,GAAGK,cAA9B,EAA8C;AAC1CD,sCAAc,IAAIJ,GAAGM,WAAP,CAAmBJ,YAAnB,EAAiCE,WAAjC,CAAd;AACH;AACD,yBAAKF,YAAL,GAAoBA,YAApB;AACA,yBAAKE,WAAL,GAAmBA,WAAnB;AACA,yBAAKG,QAAL,GAAgB,EAAhB;AACA,yBAAKC,WAAL,CAAiBL,QAAjB;AACH;;;;gDAEWM,W,EAAa;AACrB;AACA,4BAAI,KAAKN,QAAL,KAAkB,KAAK,CAA3B,EAA8B;AAC1B,iCAAKA,QAAL,GAAgB,KAAKD,YAAL,CAAkBQ,YAAlB,CAA+BD,WAA/B,CAAhB;AACH;AACD;AACA,6BAAKN,QAAL,CAAcQ,KAAd,GAAsBF,WAAtB;AACH;;;mDAEcG,K,EAAO;AAClB,4BAAML,WAAW,CACb,IAAIP,GAAGa,QAAH,CAAYC,aAAhB,EADa,EAEb,IAAId,GAAGa,QAAH,CAAYE,UAAhB,EAFa,EAGb,IAAIf,GAAGa,QAAH,CAAYG,gBAAhB,EAHa,CAAjB;;AAMA,4BAAMC,OAAO,IAAb;AACA,6BAAKV,QAAL,GAAgBR,EAAEmB,MAAF,CAASX,QAAT,EAAmB,mBAAW;AAC1C,mCAAOY,QAAQD,MAAR,CAAeN,KAAf,EAAsBK,IAAtB,CAAP;AACH,yBAFe,CAAhB;;AAIA,4BAAI,KAAKb,WAAL,YAA4BJ,GAAGoB,KAAnC,EAA0C;AACtC,iCAAKhB,WAAL,CAAiBiB,cAAjB;AACH;AACJ","file":"Clause.js","sourcesContent":["import _ from 'lodash';\nimport {UI} from '../UI';\n\nexport class Clause {\n\n    constructor(uiSegmentSrv, operator, restriction) {\n        if (restriction instanceof UI.RestrictionDTO) {\n            restriction = new UI.Restriction(uiSegmentSrv, restriction);\n        }\n        this.uiSegmentSrv = uiSegmentSrv;\n        this.restriction = restriction;\n        this.controls = [];\n        this.setOperator(operator);\n    }\n\n    setOperator(newOperator) {\n        // initialize if not initialized\n        if (this.operator === void 0) {\n            this.operator = this.uiSegmentSrv.newCondition(newOperator);\n        }\n        // Update the value if already initialized\n        this.operator.value = newOperator;\n    }\n\n    updateControls(query) {\n        const controls = [\n            new UI.Controls.RemoveControl(),\n            new UI.Controls.AddControl(),\n            new UI.Controls.AddNestedControl()\n        ];\n\n        const self = this;\n        this.controls = _.filter(controls, control => {\n            return control.filter(query, self);\n        });\n\n        if (this.restriction instanceof UI.Query) {\n            this.restriction.updateControls();\n        }\n    }\n}"]}