{"version":3,"sources":["../../../src/panels/alarm-table/table_model.js"],"names":["Model","TableModel","columns","rows","type","label","sev","Severities","id","console","warn","options","col","length","self","sort","a","b","colInfo","style","severityForLabel","desc","reverse"],"mappings":";;;;;;;;;;;;;;;AAAQA,W,YAAAA,K;;;;;;;;;;;;;;;;;;;;;4BAEKC,U;AACX,8BAAc;AAAA;;AACZ,eAAKC,OAAL,GAAe,EAAf;AACA,eAAKC,IAAL,GAAY,EAAZ;AACA,eAAKC,IAAL,GAAY,OAAZ;AACD;;;;2CAEgBC,K,EAAO;AACtB,gBAAMC,MAAMN,MAAMO,UAAN,CAAiBF,KAAjB,CAAZ;AACA,gBAAIC,GAAJ,EAAS;AACP,qBAAOA,IAAIE,EAAX;AACD,aAFD,MAEO;AACLC,sBAAQC,IAAR,CAAa,uCAAuCL,KAAvC,GAA+C,IAA5D;AACA,qBAAO,CAAC,CAAR;AACD;AACF;;;+BAEIM,O,EAAS;AACZ,gBAAIA,QAAQC,GAAR,KAAgB,IAAhB,IAAwB,KAAKV,OAAL,CAAaW,MAAb,IAAuBF,QAAQC,GAA3D,EAAgE;AAC9D;AACD;;AAED,gBAAIE,OAAO,IAAX;AACA,iBAAKX,IAAL,CAAUY,IAAV,CAAe,UAASC,CAAT,EAAYC,CAAZ,EAAe;AAC5B,kBAAMC,UAAUJ,KAAKZ,OAAL,CAAaS,QAAQC,GAArB,CAAhB;;AAEA,kBAAIM,WAAWA,QAAQC,KAAnB,IAA4BD,QAAQC,KAAR,CAAcf,IAAd,KAAuB,UAAvD,EAAmE;AACjEY,oBAAIF,KAAKM,gBAAL,CAAsBJ,EAAEL,QAAQC,GAAV,CAAtB,CAAJ;AACAK,oBAAIH,KAAKM,gBAAL,CAAsBH,EAAEN,QAAQC,GAAV,CAAtB,CAAJ;AACD,eAHD,MAGO;AACLI,oBAAIA,EAAEL,QAAQC,GAAV,CAAJ;AACAK,oBAAIA,EAAEN,QAAQC,GAAV,CAAJ;AACD;;AAED,kBAAII,IAAIC,CAAR,EAAW;AACT,uBAAO,CAAC,CAAR;AACD;AACD,kBAAID,IAAIC,CAAR,EAAW;AACT,uBAAO,CAAP;AACD;AACD,qBAAO,CAAP;AACD,aAlBD;;AAoBA,iBAAKf,OAAL,CAAaS,QAAQC,GAArB,EAA0BG,IAA1B,GAAiC,IAAjC;;AAEA,gBAAIJ,QAAQU,IAAZ,EAAkB;AAChB,mBAAKlB,IAAL,CAAUmB,OAAV;AACA,mBAAKpB,OAAL,CAAaS,QAAQC,GAArB,EAA0BS,IAA1B,GAAiC,IAAjC;AACD,aAHD,MAGO;AACL,mBAAKnB,OAAL,CAAaS,QAAQC,GAArB,EAA0BS,IAA1B,GAAiC,KAAjC;AACD;AACF","file":"table_model.js","sourcesContent":["import {Model} from '../../opennms';\n\nexport class TableModel {\n  constructor() {\n    this.columns = [];\n    this.rows = [];\n    this.type = 'table';\n  }\n\n  severityForLabel(label) {\n    const sev = Model.Severities[label];\n    if (sev) {\n      return sev.id;\n    } else {\n      console.warn('Unable to determine severity for \"' + label + '\".');\n      return -1;\n    }\n  }\n\n  sort(options) {\n    if (options.col === null || this.columns.length <= options.col) {\n      return;\n    }\n\n    var self = this;\n    this.rows.sort(function(a, b) {\n      const colInfo = self.columns[options.col];\n\n      if (colInfo && colInfo.style && colInfo.style.type === 'severity') {\n        a = self.severityForLabel(a[options.col]);\n        b = self.severityForLabel(b[options.col]);\n      } else {\n        a = a[options.col];\n        b = b[options.col];\n      }\n\n      if (a < b) {\n        return -1;\n      }\n      if (a > b) {\n        return 1;\n      }\n      return 0;\n    });\n\n    this.columns[options.col].sort = true;\n\n    if (options.desc) {\n      this.rows.reverse();\n      this.columns[options.col].desc = true;\n    } else {\n      this.columns[options.col].desc = false;\n    }\n  }\n}\n"]}