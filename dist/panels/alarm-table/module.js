define(["@grafana/data","react","@grafana/ui","@emotion/css","@grafana/runtime"],((e,t,n,r,o)=>(()=>{var a={2545:(e,t,n)=>{var r=n(1822)(n(7400),"DataView");e.exports=r},6586:(e,t,n)=>{var r=n(7753),o=n(2452),a=n(2115),l=n(8256),i=n(7426);function c(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=o,c.prototype.get=a,c.prototype.has=l,c.prototype.set=i,e.exports=c},6301:(e,t,n)=>{var r=n(9417),o=n(2470),a=n(6165),l=n(1873),i=n(2556);function c(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=o,c.prototype.get=a,c.prototype.has=l,c.prototype.set=i,e.exports=c},4538:(e,t,n)=>{var r=n(1822)(n(7400),"Map");e.exports=r},4554:(e,t,n)=>{var r=n(9448),o=n(7738),a=n(6575),l=n(7238),i=n(8738);function c(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=o,c.prototype.get=a,c.prototype.has=l,c.prototype.set=i,e.exports=c},4825:(e,t,n)=>{var r=n(1822)(n(7400),"Promise");e.exports=r},6151:(e,t,n)=>{var r=n(1822)(n(7400),"Set");e.exports=r},3694:(e,t,n)=>{var r=n(6301),o=n(7354),a=n(5863),l=n(2367),i=n(748),c=n(7569);function s(e){var t=this.__data__=new r(e);this.size=t.size}s.prototype.clear=o,s.prototype.delete=a,s.prototype.get=l,s.prototype.has=i,s.prototype.set=c,e.exports=s},6539:(e,t,n)=>{var r=n(7400).Symbol;e.exports=r},9942:(e,t,n)=>{var r=n(7400).Uint8Array;e.exports=r},6902:(e,t,n)=>{var r=n(1822)(n(7400),"WeakMap");e.exports=r},594:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}},263:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,o=0,a=[];++n<r;){var l=e[n];t(l,n,e)&&(a[o++]=l)}return a}},8213:(e,t,n)=>{var r=n(4701),o=n(2900),a=n(9785),l=n(3854),i=n(2383),c=n(8519),s=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=a(e),u=!n&&o(e),d=!n&&!u&&l(e),p=!n&&!u&&!d&&c(e),v=n||u||d||p,f=v?r(e.length,String):[],b=f.length;for(var m in e)!t&&!s.call(e,m)||v&&("length"==m||d&&("offset"==m||"parent"==m)||p&&("buffer"==m||"byteLength"==m||"byteOffset"==m)||i(m,b))||f.push(m);return f}},7141:e=>{e.exports=function(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}},1928:(e,t,n)=>{var r=n(8799),o=n(5638),a=Object.prototype.hasOwnProperty;e.exports=function(e,t,n){var l=e[t];a.call(e,t)&&o(l,n)&&(void 0!==n||t in e)||r(e,t,n)}},3382:(e,t,n)=>{var r=n(5638);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},1876:(e,t,n)=>{var r=n(5159),o=n(98);e.exports=function(e,t){return e&&r(t,o(t),e)}},5947:(e,t,n)=>{var r=n(5159),o=n(3893);e.exports=function(e,t){return e&&r(t,o(t),e)}},8799:(e,t,n)=>{var r=n(2630);e.exports=function(e,t,n){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},699:(e,t,n)=>{var r=n(3694),o=n(594),a=n(1928),l=n(1876),i=n(5947),c=n(2734),s=n(7561),u=n(1102),d=n(7048),p=n(1385),v=n(9759),f=n(3533),b=n(6541),m=n(2078),y=n(7635),h=n(9785),g=n(3854),x=n(8247),j=n(1611),E=n(7614),O=n(98),w=n(3893),S="[object Arguments]",_="[object Function]",P="[object Object]",T={};T[S]=T["[object Array]"]=T["[object ArrayBuffer]"]=T["[object DataView]"]=T["[object Boolean]"]=T["[object Date]"]=T["[object Float32Array]"]=T["[object Float64Array]"]=T["[object Int8Array]"]=T["[object Int16Array]"]=T["[object Int32Array]"]=T["[object Map]"]=T["[object Number]"]=T[P]=T["[object RegExp]"]=T["[object Set]"]=T["[object String]"]=T["[object Symbol]"]=T["[object Uint8Array]"]=T["[object Uint8ClampedArray]"]=T["[object Uint16Array]"]=T["[object Uint32Array]"]=!0,T["[object Error]"]=T[_]=T["[object WeakMap]"]=!1,e.exports=function e(t,n,A,k,C,M){var z,N=1&n,I=2&n,D=4&n;if(A&&(z=C?A(t,k,C,M):A(t)),void 0!==z)return z;if(!j(t))return t;var F=h(t);if(F){if(z=b(t),!N)return s(t,z)}else{var L=f(t),U=L==_||"[object GeneratorFunction]"==L;if(g(t))return c(t,N);if(L==P||L==S||U&&!C){if(z=I||U?{}:y(t),!N)return I?d(t,i(z,t)):u(t,l(z,t))}else{if(!T[L])return C?t:{};z=m(t,L,N)}}M||(M=new r);var B=M.get(t);if(B)return B;M.set(t,z),E(t)?t.forEach((function(r){z.add(e(r,n,A,r,t,M))})):x(t)&&t.forEach((function(r,o){z.set(o,e(r,n,A,o,t,M))}));var R=F?void 0:(D?I?v:p:I?w:O)(t);return o(R||t,(function(r,o){R&&(r=t[o=r]),a(z,o,e(r,n,A,o,t,M))})),z}},158:(e,t,n)=>{var r=n(1611),o=Object.create,a=function(){function e(){}return function(t){if(!r(t))return{};if(o)return o(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();e.exports=a},1324:(e,t,n)=>{var r=n(7141),o=n(9785);e.exports=function(e,t,n){var a=t(e);return o(e)?a:r(a,n(e))}},9736:(e,t,n)=>{var r=n(6539),o=n(4840),a=n(1258),l=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":l&&l in Object(e)?o(e):a(e)}},5829:(e,t,n)=>{var r=n(9736),o=n(2360);e.exports=function(e){return o(e)&&"[object Arguments]"==r(e)}},7657:(e,t,n)=>{var r=n(3533),o=n(2360);e.exports=function(e){return o(e)&&"[object Map]"==r(e)}},6729:(e,t,n)=>{var r=n(8338),o=n(9678),a=n(1611),l=n(6532),i=/^\[object .+?Constructor\]$/,c=Function.prototype,s=Object.prototype,u=c.toString,d=s.hasOwnProperty,p=RegExp("^"+u.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!a(e)||o(e))&&(r(e)?p:i).test(l(e))}},6903:(e,t,n)=>{var r=n(3533),o=n(2360);e.exports=function(e){return o(e)&&"[object Set]"==r(e)}},6972:(e,t,n)=>{var r=n(9736),o=n(4194),a=n(2360),l={};l["[object Float32Array]"]=l["[object Float64Array]"]=l["[object Int8Array]"]=l["[object Int16Array]"]=l["[object Int32Array]"]=l["[object Uint8Array]"]=l["[object Uint8ClampedArray]"]=l["[object Uint16Array]"]=l["[object Uint32Array]"]=!0,l["[object Arguments]"]=l["[object Array]"]=l["[object ArrayBuffer]"]=l["[object Boolean]"]=l["[object DataView]"]=l["[object Date]"]=l["[object Error]"]=l["[object Function]"]=l["[object Map]"]=l["[object Number]"]=l["[object Object]"]=l["[object RegExp]"]=l["[object Set]"]=l["[object String]"]=l["[object WeakMap]"]=!1,e.exports=function(e){return a(e)&&o(e.length)&&!!l[r(e)]}},186:(e,t,n)=>{var r=n(6016),o=n(962),a=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return o(e);var t=[];for(var n in Object(e))a.call(e,n)&&"constructor"!=n&&t.push(n);return t}},9464:(e,t,n)=>{var r=n(1611),o=n(6016),a=n(1586),l=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return a(e);var t=o(e),n=[];for(var i in e)("constructor"!=i||!t&&l.call(e,i))&&n.push(i);return n}},4701:e=>{e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},9334:e=>{e.exports=function(e){return function(t){return e(t)}}},5825:(e,t,n)=>{var r=n(9942);e.exports=function(e){var t=new e.constructor(e.byteLength);return new r(t).set(new r(e)),t}},2734:(e,t,n)=>{e=n.nmd(e);var r=n(7400),o=t&&!t.nodeType&&t,a=o&&e&&!e.nodeType&&e,l=a&&a.exports===o?r.Buffer:void 0,i=l?l.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var n=e.length,r=i?i(n):new e.constructor(n);return e.copy(r),r}},1859:(e,t,n)=>{var r=n(5825);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}},9377:e=>{var t=/\w*$/;e.exports=function(e){var n=new e.constructor(e.source,t.exec(e));return n.lastIndex=e.lastIndex,n}},4116:(e,t,n)=>{var r=n(6539),o=r?r.prototype:void 0,a=o?o.valueOf:void 0;e.exports=function(e){return a?Object(a.call(e)):{}}},3428:(e,t,n)=>{var r=n(5825);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}},7561:e=>{e.exports=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}},5159:(e,t,n)=>{var r=n(1928),o=n(8799);e.exports=function(e,t,n,a){var l=!n;n||(n={});for(var i=-1,c=t.length;++i<c;){var s=t[i],u=a?a(n[s],e[s],s,n,e):void 0;void 0===u&&(u=e[s]),l?o(n,s,u):r(n,s,u)}return n}},1102:(e,t,n)=>{var r=n(5159),o=n(3080);e.exports=function(e,t){return r(e,o(e),t)}},7048:(e,t,n)=>{var r=n(5159),o=n(791);e.exports=function(e,t){return r(e,o(e),t)}},4937:(e,t,n)=>{var r=n(7400)["__core-js_shared__"];e.exports=r},2630:(e,t,n)=>{var r=n(1822),o=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=o},9120:(e,t,n)=>{var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=r},1385:(e,t,n)=>{var r=n(1324),o=n(3080),a=n(98);e.exports=function(e){return r(e,a,o)}},9759:(e,t,n)=>{var r=n(1324),o=n(791),a=n(3893);e.exports=function(e){return r(e,a,o)}},5899:(e,t,n)=>{var r=n(4479);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},1822:(e,t,n)=>{var r=n(6729),o=n(5371);e.exports=function(e,t){var n=o(e,t);return r(n)?n:void 0}},2173:(e,t,n)=>{var r=n(8023)(Object.getPrototypeOf,Object);e.exports=r},4840:(e,t,n)=>{var r=n(6539),o=Object.prototype,a=o.hasOwnProperty,l=o.toString,i=r?r.toStringTag:void 0;e.exports=function(e){var t=a.call(e,i),n=e[i];try{e[i]=void 0;var r=!0}catch(e){}var o=l.call(e);return r&&(t?e[i]=n:delete e[i]),o}},3080:(e,t,n)=>{var r=n(263),o=n(5937),a=Object.prototype.propertyIsEnumerable,l=Object.getOwnPropertySymbols,i=l?function(e){return null==e?[]:(e=Object(e),r(l(e),(function(t){return a.call(e,t)})))}:o;e.exports=i},791:(e,t,n)=>{var r=n(7141),o=n(2173),a=n(3080),l=n(5937),i=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)r(t,a(e)),e=o(e);return t}:l;e.exports=i},3533:(e,t,n)=>{var r=n(2545),o=n(4538),a=n(4825),l=n(6151),i=n(6902),c=n(9736),s=n(6532),u="[object Map]",d="[object Promise]",p="[object Set]",v="[object WeakMap]",f="[object DataView]",b=s(r),m=s(o),y=s(a),h=s(l),g=s(i),x=c;(r&&x(new r(new ArrayBuffer(1)))!=f||o&&x(new o)!=u||a&&x(a.resolve())!=d||l&&x(new l)!=p||i&&x(new i)!=v)&&(x=function(e){var t=c(e),n="[object Object]"==t?e.constructor:void 0,r=n?s(n):"";if(r)switch(r){case b:return f;case m:return u;case y:return d;case h:return p;case g:return v}return t}),e.exports=x},5371:e=>{e.exports=function(e,t){return null==e?void 0:e[t]}},7753:(e,t,n)=>{var r=n(5718);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},2452:e=>{e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},2115:(e,t,n)=>{var r=n(5718),o=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return o.call(t,e)?t[e]:void 0}},8256:(e,t,n)=>{var r=n(5718),o=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:o.call(t,e)}},7426:(e,t,n)=>{var r=n(5718);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},6541:e=>{var t=Object.prototype.hasOwnProperty;e.exports=function(e){var n=e.length,r=new e.constructor(n);return n&&"string"==typeof e[0]&&t.call(e,"index")&&(r.index=e.index,r.input=e.input),r}},2078:(e,t,n)=>{var r=n(5825),o=n(1859),a=n(9377),l=n(4116),i=n(3428);e.exports=function(e,t,n){var c=e.constructor;switch(t){case"[object ArrayBuffer]":return r(e);case"[object Boolean]":case"[object Date]":return new c(+e);case"[object DataView]":return o(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return i(e,n);case"[object Map]":case"[object Set]":return new c;case"[object Number]":case"[object String]":return new c(e);case"[object RegExp]":return a(e);case"[object Symbol]":return l(e)}}},7635:(e,t,n)=>{var r=n(158),o=n(2173),a=n(6016);e.exports=function(e){return"function"!=typeof e.constructor||a(e)?{}:r(o(e))}},2383:e=>{var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,n){var r=typeof e;return!!(n=null==n?9007199254740991:n)&&("number"==r||"symbol"!=r&&t.test(e))&&e>-1&&e%1==0&&e<n}},4479:e=>{e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},9678:(e,t,n)=>{var r,o=n(4937),a=(r=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";e.exports=function(e){return!!a&&a in e}},6016:e=>{var t=Object.prototype;e.exports=function(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||t)}},9417:e=>{e.exports=function(){this.__data__=[],this.size=0}},2470:(e,t,n)=>{var r=n(3382),o=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0||(n==t.length-1?t.pop():o.call(t,n,1),--this.size,0))}},6165:(e,t,n)=>{var r=n(3382);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},1873:(e,t,n)=>{var r=n(3382);e.exports=function(e){return r(this.__data__,e)>-1}},2556:(e,t,n)=>{var r=n(3382);e.exports=function(e,t){var n=this.__data__,o=r(n,e);return o<0?(++this.size,n.push([e,t])):n[o][1]=t,this}},9448:(e,t,n)=>{var r=n(6586),o=n(6301),a=n(4538);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(a||o),string:new r}}},7738:(e,t,n)=>{var r=n(5899);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},6575:(e,t,n)=>{var r=n(5899);e.exports=function(e){return r(this,e).get(e)}},7238:(e,t,n)=>{var r=n(5899);e.exports=function(e){return r(this,e).has(e)}},8738:(e,t,n)=>{var r=n(5899);e.exports=function(e,t){var n=r(this,e),o=n.size;return n.set(e,t),this.size+=n.size==o?0:1,this}},5718:(e,t,n)=>{var r=n(1822)(Object,"create");e.exports=r},962:(e,t,n)=>{var r=n(8023)(Object.keys,Object);e.exports=r},1586:e=>{e.exports=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}},8125:(e,t,n)=>{e=n.nmd(e);var r=n(9120),o=t&&!t.nodeType&&t,a=o&&e&&!e.nodeType&&e,l=a&&a.exports===o&&r.process,i=function(){try{return a&&a.require&&a.require("util").types||l&&l.binding&&l.binding("util")}catch(e){}}();e.exports=i},1258:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},8023:e=>{e.exports=function(e,t){return function(n){return e(t(n))}}},7400:(e,t,n)=>{var r=n(9120),o="object"==typeof self&&self&&self.Object===Object&&self,a=r||o||Function("return this")();e.exports=a},7354:(e,t,n)=>{var r=n(6301);e.exports=function(){this.__data__=new r,this.size=0}},5863:e=>{e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},2367:e=>{e.exports=function(e){return this.__data__.get(e)}},748:e=>{e.exports=function(e){return this.__data__.has(e)}},7569:(e,t,n)=>{var r=n(6301),o=n(4538),a=n(4554);e.exports=function(e,t){var n=this.__data__;if(n instanceof r){var l=n.__data__;if(!o||l.length<199)return l.push([e,t]),this.size=++n.size,this;n=this.__data__=new a(l)}return n.set(e,t),this.size=n.size,this}},6532:e=>{var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},454:(e,t,n)=>{var r=n(699);e.exports=function(e){return r(e,5)}},5638:e=>{e.exports=function(e,t){return e===t||e!=e&&t!=t}},2900:(e,t,n)=>{var r=n(5829),o=n(2360),a=Object.prototype,l=a.hasOwnProperty,i=a.propertyIsEnumerable,c=r(function(){return arguments}())?r:function(e){return o(e)&&l.call(e,"callee")&&!i.call(e,"callee")};e.exports=c},9785:e=>{var t=Array.isArray;e.exports=t},68:(e,t,n)=>{var r=n(8338),o=n(4194);e.exports=function(e){return null!=e&&o(e.length)&&!r(e)}},3854:(e,t,n)=>{e=n.nmd(e);var r=n(7400),o=n(7714),a=t&&!t.nodeType&&t,l=a&&e&&!e.nodeType&&e,i=l&&l.exports===a?r.Buffer:void 0,c=(i?i.isBuffer:void 0)||o;e.exports=c},8338:(e,t,n)=>{var r=n(9736),o=n(1611);e.exports=function(e){if(!o(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},4194:e=>{e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},8247:(e,t,n)=>{var r=n(7657),o=n(9334),a=n(8125),l=a&&a.isMap,i=l?o(l):r;e.exports=i},1611:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},2360:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},7614:(e,t,n)=>{var r=n(6903),o=n(9334),a=n(8125),l=a&&a.isSet,i=l?o(l):r;e.exports=i},8519:(e,t,n)=>{var r=n(6972),o=n(9334),a=n(8125),l=a&&a.isTypedArray,i=l?o(l):r;e.exports=i},98:(e,t,n)=>{var r=n(8213),o=n(186),a=n(68);e.exports=function(e){return a(e)?r(e):o(e)}},3893:(e,t,n)=>{var r=n(8213),o=n(9464),a=n(68);e.exports=function(e){return a(e)?r(e,!0):o(e)}},5937:e=>{e.exports=function(){return[]}},7714:e=>{e.exports=function(){return!1}},7644:e=>{"use strict";e.exports=r},3305:t=>{"use strict";t.exports=e},3545:e=>{"use strict";e.exports=o},7388:e=>{"use strict";e.exports=n},2650:e=>{"use strict";e.exports=t}},l={};function i(e){var t=l[e];if(void 0!==t)return t.exports;var n=l[e]={id:e,loaded:!1,exports:{}};return a[e](n,n.exports,i),n.loaded=!0,n.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.nmd=e=>(e.paths=[],e.children||(e.children=[]),e);var c={};return(()=>{"use strict";i.r(c),i.d(c,{plugin:()=>X});var e=i(3305),t=i(2650),n=i.n(t),r=i(7388),o=i(7644);const a=({state:e,actions:t})=>{const a=e.indexes.filter((e=>!0===e)).length,l=a>1?` (${a})`:"";let i=[{label:"Details",action:t.details},{type:"divider",label:""},{label:`Acknowledge${l}`,action:t.acknowledge},{label:`Escalate${l}`,action:t.escalate},{label:`Clear${l}`,action:t.clear}];a>1&&(i=i.splice(2,i.length));const c=(0,r.useStyles2)((e=>({divider:(0,o.css)({height:1,backgroundColor:e.colors.border.weak,margin:e.spacing(.5,0)})})));return n().createElement(r.Menu,null,i.map(((e,t)=>{let o=n().createElement(r.MenuItem,{label:e.label,key:t,onClick:e.action});return"divider"===e.type&&(o=n().createElement("div",{className:c.divider})),o})))},l=({alarm:e})=>n().createElement("div",null,n().createElement("pre",null,JSON.stringify(e,null,2)));var s=i(3545);function u(e,t,n,r,o,a,l){try{var i=e[a](l),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function d(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function l(e){u(a,r,o,l,i,"next",e)}function i(e){u(a,r,o,l,i,"throw",e)}l(void 0)}))}}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){p(e,t,n[t])}))}return e}function f(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}const b=({alarm:e,client:o})=>{const[a,l]=(0,t.useState)(null==e?void 0:e.sticky),[i,c]=(0,t.useState)(null==e?void 0:e.journal),[u,p]=(0,t.useState)(!1);(0,t.useEffect)((()=>{l(null==e?void 0:e.sticky)}),[null==e?void 0:e.sticky]),(0,t.useEffect)((()=>{c(null==e?void 0:e.journal)}),[null==e?void 0:e.journal]);const b=(m=d((function*(){var t;p(!0),yield null==o?void 0:o.saveSticky(null==e?void 0:e.id,null==a?void 0:a.body,null===s.config||void 0===s.config||null===(t=s.config.bootData)||void 0===t?void 0:t.user.id),p(!1)})),function(){return m.apply(this,arguments)});var m;const y=function(){var t=d((function*(){p(!0),yield null==o?void 0:o.deleteSticky(null==e?void 0:e.id),p(!1)}));return function(){return t.apply(this,arguments)}}(),h=function(){var t=d((function*(){var t;p(!0),yield null==o?void 0:o.saveJournal(null==e?void 0:e.id,null==i?void 0:i.body,null===s.config||void 0===s.config||null===(t=s.config.bootData)||void 0===t?void 0:t.user.id),p(!1)}));return function(){return t.apply(this,arguments)}}(),g=function(){var t=d((function*(){p(!0),yield null==o?void 0:o.deleteJournal(null==e?void 0:e.id),p(!1)}));return function(){return t.apply(this,arguments)}}();return n().createElement("div",null,n().createElement("style",null,"\n                    .sticky-memo {\n                        display:flex;\n                    }\n                    .memo-header {\n                        margin-top:24px;\n                    }\n                    .memo-wrapper {\n                        margin-bottom:24px;\n                    }\n                    "),n().createElement("div",{className:"memo-wrapper"},n().createElement("h2",{className:"memo-header"},"Sticky Memo"),n().createElement(r.TextArea,{value:null==a?void 0:a.body,onChange:t=>{l(f(v({},null==e?void 0:e.sticky),{body:t.target.value}))}}),n().createElement(r.HorizontalGroup,{className:"sticky-memo"},u,n().createElement(r.Button,{onClick:b},n().createElement("i",{className:"fa fa-plus"})," Save"),n().createElement(r.Button,{variant:"destructive",onClick:y},n().createElement("i",{className:"fa fa-minus"})," Delete"))),n().createElement("div",{className:"memo-wrapper"},n().createElement("h2",{className:"memo-header"},"Journal Memo"),n().createElement(r.TextArea,{value:null==i?void 0:i.body,onChange:t=>{c(f(v({},null==e?void 0:e.journal),{body:t.target.value}))}}),n().createElement(r.HorizontalGroup,{className:"sticky-memo"},u,n().createElement(r.Button,{onClick:h},n().createElement("i",{className:"fa fa-plus"})," Save"),n().createElement(r.Button,{variant:"destructive",onClick:g},n().createElement("i",{className:"fa fa-minus"})," Delete"))))},m=({alarm:e})=>{var t,r,o,a;return n().createElement("div",null,n().createElement("style",null,"\n                .alarm-details-table tr{\n                        height:32px;\n                        padding-left:12px;\n                }\n                .alarm-details-table tr:nth-child(2n+1) {\n                    background-color:#1c1f23;\n                }\n                .alarm-details-table th {\n                    padding-left:12px;\n                    padding-right:12px;\n                    white-space: nowrap;\n                }\n                .alarm-details-table td {\n                    padding-top:12px;\n                    padding-bottom:12px;\n                }\n                "),n().createElement("table",{className:"alarm-details-table"},n().createElement("tr",null,n().createElement("th",null,"Alarm ID"),n().createElement("td",null,null==e?void 0:e.id)),n().createElement("tr",null,n().createElement("th",null,"UEI"),n().createElement("td",{className:"wrap"},null==e?void 0:e.uei)),n().createElement("tr",null,n().createElement("th",null,"Severity"),n().createElement("td",null,null==e||null===(t=e.severity)||void 0===t?void 0:t.label)),n().createElement("tr",null,n().createElement("th",null,"Last Event Time"),n().createElement("td",null,null==e||null===(r=e.lastEvent)||void 0===r||null===(o=r.time)||void 0===o?void 0:o.toString())),n().createElement("tr",null,n().createElement("th",null,"First Event Time"),n().createElement("td",null,null==e||null===(a=e.firstEventTime)||void 0===a?void 0:a.toString())),n().createElement("tr",null,n().createElement("th",null,"Log Message"),n().createElement("td",{dangerouslySetInnerHTML:{__html:(null==e?void 0:e.logMessage)||""}})),n().createElement("tr",null,n().createElement("th",null,"Description"),n().createElement("td",{dangerouslySetInnerHTML:{__html:(null==e?void 0:e.description)||""}})),n().createElement("tr",null,n().createElement("th",null,"Count"),n().createElement("td",null,null==e?void 0:e.count)),n().createElement("tr",null,n().createElement("th",null,"Reduction Key"),n().createElement("td",null,null==e?void 0:e.reductionKey)),(null==e?void 0:e.managedObjectInstance)&&n().createElement("tr",null,n().createElement("th",null,"Managed Object Instance"),n().createElement("td",null,null==e?void 0:e.managedObjectInstance)),(null==e?void 0:e.managedObjectType)&&n().createElement("tr",null,n().createElement("th",null,"Managed Object Type"),n().createElement("td",null,null==e?void 0:e.managedObjectType))))},y=({tab:e,alarm:t,client:r})=>n().createElement(n().Fragment,null,0===e&&n().createElement(m,{alarm:t}),1===e&&n().createElement(b,{alarm:t,client:r}),2===e&&n().createElement(l,{alarm:t})),h=()=>n().createElement("style",null,'\n                        .font-size-0 {\n                            font-size:80%;\n                        }\n                        .font-size-1 {\n                            font-size:90%;\n                        }\n                        .font-size-2 {\n                            font-size:100%;\n                        }\n                        .font-size-3 {\n                            font-size:110%;\n                        }\n                        .font-size-4 {\n                            font-size:120%;\n                        }\n                        .font-size-5 {\n                            font-size:130%;\n                        }\n                        .font-size-6 {\n                            font-size:140%;\n                        }\n                        .font-size-7 {\n                            font-size:150%;\n                        }\n                        .font-size-8 {\n                            font-size:160%;\n                        }\n                        .font-size-9 {\n                            font-size:180%;\n                        }\n                        .font-size-10 {\n                            font-size:200%;\n                        }\n                        .font-size-11 {\n                            font-size:220%;\n                        }\n                        .font-size-12 {\n                            font-size:250%;\n                        }\n                        .no-scroll .track-horizontal{\n                            display:none;\n                        }\n                        .alarm-query {\n                            height:100%;\n                        }\n                        .non-alarm-query {\n                            height:100%;\n                            display:flex;\n                            align-items:center;\n                            justify-content:center;\n                        }\n                        div[role="row"] {\n                            border:1px solid transparent;\n                            padding-bottom:1px;\n                        }\n                        .table-body div[role="row"]:hover {\n                            background-color:rgb(1, 33, 137);\n                        }\n                        .table-body div[role="row"]:last-child {\n                            border-bottom:1px solid transparent;\n                        }\n                        .table-body div[role="row"]:last-child {\n                            border-bottom:1px solid transparent;\n                        }\n\n                        .table-body div[role="row"].select-start {\n                            border-top:1px dashed white;\n                            border-right:1px dashed white;\n                            border-left:1px dashed white;\n                        }\n                        .table-body div[role="row"].select-continue {\n                            border-right:1px dashed white;\n                            border-left:1px dashed white;\n                        }\n                        .table-body div[role="row"].select-end {\n                            border-bottom:1px dashed white;\n                            border-right:1px dashed white;\n                            border-left:1px dashed white;\n                        }\n \n                    ');var g=i(454),x=i.n(g);const j=(e,t)=>{var n;return null===(n=e.find((e=>"ID"===e.name)))||void 0===n?void 0:n.values.get(t)};function E(e,t,n,r,o,a,l){try{var i=e[a](l),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function O(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function l(e){E(a,r,o,l,i,"next",e)}function i(e){E(a,r,o,l,i,"throw",e)}l(void 0)}))}}const w=(e,n,r,o,a)=>{const[l,i]=(0,t.useState)(!1),[c,u]=(0,t.useState)();(0,t.useEffect)((()=>{var e;(e=O((function*(){if(o){const e=yield(0,s.getBackendSrv)().get("/api/user");u(e)}else u(void 0)})),function(){return e.apply(this,arguments)})()}),[o]);const d=(p=O((function*(t){for(let r=0;r<e.length;r++)if(e[r]){const e=j(n,r);yield t(e,null==c?void 0:c.login)}})),function(e){return p.apply(this,arguments)});var p;const v=function(){var e=O((function*(){yield d(function(){var e=O((function*(e,t){yield null==a?void 0:a.doClear(e,null==c?void 0:c.login)}));return function(t,n){return e.apply(this,arguments)}}()),r()}));return function(){return e.apply(this,arguments)}}(),f=function(){var e=O((function*(){yield d(function(){var e=O((function*(e,t){yield null==a?void 0:a.doEscalate(e,null==c?void 0:c.login)}));return function(t,n){return e.apply(this,arguments)}}()),r()}));return function(){return e.apply(this,arguments)}}(),b=function(){var e=O((function*(){yield d(function(){var e=O((function*(e,t){yield null==a?void 0:a.doAck(e,null==c?void 0:c.login)}));return function(t,n){return e.apply(this,arguments)}}()),r()}));return function(){return e.apply(this,arguments)}}();return{actions:{clear:v,details:()=>{r(),i(!0)},escalate:f,acknowledge:b},detailsModal:l,setDetailsModal:i}},S=[["#999000","#eee000","#86b15b","#fccc3b","#ee901c","#e3692f","#db4345"],["#999000","#999","#360","#fc0","#f90","#f30","#c00"],["#614765","#ccc","#00b48b","#00d3c9","#ffce56","#ff9033","#ff3b50"],["#999000","#999","#a1cc72","#6ec5c6","#f9df6c","#dda35c","#ea3225"],["#a44ae6","#5dc93b","#ccc","#76b7f9","#fffd54","#f4b54b","#eb3223"]];function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function P(e,t,n,r,o,a,l){try{var i=e[a](l),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}const T=e=>{const[n,r]=(0,t.useState)();return(0,t.useEffect)((()=>{const t=(n=function*(){const t=(0,s.getDataSourceSrv)(),n=yield t.get(e);r(n.client)},o=function(){var e=this,t=arguments;return new Promise((function(r,o){var a=n.apply(e,t);function l(e){P(a,r,o,l,i,"next",e)}function i(e){P(a,r,o,l,i,"throw",e)}l(void 0)}))},function(){return o.apply(this,arguments)});var n,o;e&&t()}),[e]),{client:n}};function A(e,t,n,r,o,a,l){try{var i=e[a](l),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}const k=(e,n,r)=>{const[o,a]=(0,t.useState)(!1),[l,i]=(0,t.useState)(-1),[c,s]=(0,t.useState)();return(0,t.useEffect)((()=>{var t;if("alarms"===(null==e||null===(t=e[0])||void 0===t?void 0:t.name)){a(!0);const t=j(null==e?void 0:e[0].fields,n);i(null!=t?t:-1)}else i(-1),a(!1)}),[e,n]),(0,t.useEffect)((()=>{const e=(t=function*(){if(void 0!==l&&l>=0){const e=yield null==r?void 0:r.getAlarm(l);s(e)}},n=function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function l(e){A(a,r,o,l,i,"next",e)}function i(e){A(a,r,o,l,i,"throw",e)}l(void 0)}))},function(){return n.apply(this,arguments)});var t,n;l!==(null==c?void 0:c.id)&&e()}),[null==c?void 0:c.id,l,r]),{alarm:c,alarmQuery:o,goToAlarm:()=>{(null==c?void 0:c.detailsPage)&&(window.location.href=c.detailsPage)}}};function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const M=({onChange:e,context:o})=>{var a,l;const[i,c]=(0,t.useState)((null==o||null===(a=o.options)||void 0===a||null===(l=a.alarmTable)||void 0===l?void 0:l.alarmTableAdditional)||{useGrafanaUser:!1});(0,t.useEffect)((()=>{e(i)}),[i]);return n().createElement("div",null,n().createElement(r.InlineFieldRow,null,n().createElement(r.InlineField,{label:"Use Grafana user",tooltip:"Used to control whether operations on alarms are performed the data source user, or the user that is currently logged in to Grafana. Supported operations are escalating, clearing, un-acknowledging alarms as well as creating/updating a journal/memo. NOTE: The data source must be configured using an user with the 'admin' role in order to perform actions as other users."},n().createElement("div",{style:{display:"flex",alignItems:"center",height:"32px"}},n().createElement(r.Switch,{value:i.useGrafanaUser,onChange:()=>((e,t)=>{const n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){C(e,t,n[t])}))}return e}({},i);n[e]=t,c(n)})("useGrafanaUser",!i.useGrafanaUser)})))))},z=({title:e,icon:t,color:r})=>n().createElement("div",{style:{backgroundColor:r,display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",height:30,padding:"0 10px",color:"#fff",maxWidth:260}},n().createElement("style",null,"\n                i.color-bar {\n                    text-shadow: 1px 0 0 #000,-1px 0 0 #000,0 1px 0 #000,0 -1px 0 #000,.5px .5px #000,-.5px -.5px 0 #000,.5px -.5px 0 #000,-.5px .5px 0 #000;\n                }\n                .color-bar-title {\n                    background-color:#565656;\n                    padding:1px 8px;\n                    border-radius: 10px;\n                }\n                "),n().createElement("div",{className:"color-bar-title"},e),n().createElement("div",null,n().createElement("i",{className:` color-bar fa fa-${t}`}))),N=({theme:e})=>{const t=()=>{let t=0;return e&&"string"==typeof e?t=Number(e):e&&"number"==typeof e&&S[e]&&(t=e),t};return n().createElement("div",{style:{marginTop:20}},[{text:"Indeterminate",icon:"question-circle"},{text:"Cleared",icon:"check-circle"},{text:"Normal",icon:"leaf"},{text:"Warning",icon:"exclamation-triangle"},{text:"Minor",icon:"bolt"},{text:"Major",icon:"fire"},{text:"Critical",icon:"bomb"}].map(((e,r)=>n().createElement(z,{key:r,title:e.text,icon:e.icon,color:S[t()][r]}))))};function I(){return I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},I.apply(this,arguments)}const D=e=>{var{children:t}=e,o=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,["children"]);return n().createElement(n().Fragment,null,n().createElement("style",null,"\n                        .onms-inline-field > label{\n                            width:160px;\n                        }\n                    "),n().createElement(r.InlineField,I({},o,{className:"onms-inline-field"}),t))},F=[{label:"80%",value:0},{label:"90%",value:1},{label:"100%",value:2},{label:"110%",value:3},{label:"120%",value:4},{label:"130%",value:5},{label:"140%",value:6},{label:"150%",value:7},{label:"160%",value:8},{label:"180%",value:9},{label:"200%",value:10},{label:"220%",value:11},{label:"250%",value:12}],L=[{label:"Default",value:0},{label:"OpenNMS",value:1},{label:"Oh My!",value:2},{label:"No, Never Mind (i)",value:3},{label:"That's Cool",value:4},{label:"Custom",value:5}],U=[{label:"Is Acknowledged",value:20},{label:"Severity",value:5},{label:"Count",value:1},{label:"Last Event Time",value:23},{label:"Location",value:8},{label:"Node Label",value:14},{label:"Log Message",value:9}];function B(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const R=({onChange:e,alarmTable:o})=>{var a,l,i;const[c,s]=(0,t.useState)({styleWithSeverity:(null==o||null===(a=o.alarmTableAlarms)||void 0===a?void 0:a.styleWithSeverity)||{label:"Column",value:1},severityTheme:(null==o||null===(l=o.alarmTableAlarms)||void 0===l?void 0:l.severityTheme)||{label:"Default",value:0}});(0,t.useEffect)((()=>{e(c)}),[c]);const u=(e,t)=>{const n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){B(e,t,n[t])}))}return e}({},c);n[e]=t,s(n)};return n().createElement("div",null,n().createElement(D,{label:"Style with severity"},n().createElement(r.Select,{value:c.styleWithSeverity,onChange:e=>u("styleWithSeverity",e),options:[{label:"Column",value:1},{label:"Off",value:2}]})),n().createElement(D,{label:"Severity theme"},n().createElement(r.Select,{value:c.severityTheme,onChange:e=>u("severityTheme",e),options:L})),n().createElement(N,{theme:null===(i=c.severityTheme)||void 0===i?void 0:i.value}))},$=({values:e,onChange:t})=>{const r=(n,r)=>{const o=[...e],a=o.splice(r,1);o.splice(r-1,0,a[0]),t(o)},o=(n,r)=>{const o=[...e],a=o.splice(r,1);o.splice(r+1,0,a[0]),t(o)},a=(n,r)=>{const o=[...e];o.splice(r,1),t(o)},l=e=>" "===e||"Enter"===e;return n().createElement("div",{className:"onms-drag-list"},n().createElement("style",null,"\n                    .onms-drag-buttons {\n                        display:flex;\n                        margin-left:auto;\n                    }\n                    .onms-drag-list {\n                        max-width:360px;\n                    }\n                    .onms-drag-button {\n                        background-color:rgb(61, 113, 217);\n                        border-radius:2px;\n                        width:22px;\n                        height:22px;\n                        display:flex;\n                        align-items:center;\n                        justify-content:center;\n                        margin-right:6px;\n                        cursor:pointer;\n                    }\n                    .onms-drag-button.onms-drag-remove {\n                        background-color:rgb(239, 25, 32);\n                    }\n                    .onms-drag-wrapper{\n                        height: 40px;\n                        margin-bottom:6px;\n                        display: flex;\n                        align-items: center;\n                        border:1px solid #2f2e2e;\n                        padding:10px 15px;\n                        border-radius:2px;\n                    }\n                    "),e.map(((e,t)=>n().createElement("div",{key:t,className:"onms-drag-wrapper"},n().createElement("span",null,t+1,". "),n().createElement("span",null,e.label),n().createElement("div",{className:"onms-drag-buttons"},n().createElement("span",{className:"onms-drag-button",tabIndex:0,onKeyUp:e=>((e,t)=>{l(e.key)&&r(0,t)})(e,t),onClick:e=>r(0,t)},n().createElement("i",{className:"fa fa-arrow-up"})),n().createElement("span",{className:"onms-drag-button",tabIndex:0,onKeyUp:e=>((e,t)=>{l(e.key)&&o(0,t)})(e,t),onClick:e=>o(0,t)},n().createElement("i",{className:"fa fa-arrow-down"})),n().createElement("span",{className:"onms-drag-button onms-drag-remove",onKeyUp:e=>((e,t)=>{l(e.key)&&a(0,t)})(e,t),tabIndex:0,onClick:e=>a(0,t)},n().createElement("i",{className:"fa fa-ban"})))))))};function W(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){W(e,t,n[t])}))}return e}const V=({onChange:e,context:o})=>{var a,l,i,c;const[s,u]=(0,t.useState)((null==o||null===(a=o.options)||void 0===a||null===(l=a.alarmTable)||void 0===l?void 0:l.alarmTableData)||{columns:U});(0,t.useEffect)((()=>{e(s)}),[s]);const d=(e,t)=>{const n=q({},s);n[e]=t,u(n)};return n().createElement("div",null,n().createElement(D,{label:"Columns"},n().createElement(r.Select,{placeholder:"Add Column",value:"",onChange:e=>{const t=[...s.columns];t.push(e),d("columns",t)},options:null==o||null===(i=o.data)||void 0===i||null===(c=i[0])||void 0===c?void 0:c.fields.map(((e,t)=>{return n=q({},e),r=null!=(r={value:t,label:e.name})?r:{},Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}(Object(r)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(r,e))})),n;var n,r}))})),n().createElement($,{values:null==s?void 0:s.columns,onChange:e=>{d("columns",e)}}))},G=({className:e,children:t})=>n().createElement("div",{className:e,style:{display:"flex",alignItems:"center",height:32,width:32}},t);function K(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const J=({onChange:e,context:o})=>{var a,l;const[i,c]=(0,t.useState)((null==o||null===(a=o.options)||void 0===a||null===(l=a.alarmTable)||void 0===l?void 0:l.alarmTablePaging)||{pauseRefresh:!1,scroll:!0,rowsPerPage:10,fontSize:{label:"100%",value:2}}),s=(e,t)=>{const n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){K(e,t,n[t])}))}return e}({},i);n[e]=t,c(n)};return(0,t.useEffect)((()=>{e(i)}),[i]),n().createElement("div",null,n().createElement(D,{label:"Rows per page"},n().createElement(r.Input,{type:"number",value:i.rowsPerPage,onChange:e=>s("rowsPerPage",e.currentTarget.value)})),n().createElement(D,{label:"Scroll"},n().createElement(G,null,n().createElement(r.Switch,{value:i.scroll,onChange:e=>s("scroll",!i.scroll)}))),n().createElement(D,{label:"Font size"},n().createElement(r.Select,{value:i.fontSize,options:F,onChange:e=>s("fontSize",e)})))};function H(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Q=({context:e,onChange:r})=>{var o;const[a,l]=(0,t.useState)({}),i=(e,t)=>{l((n=>{const r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){H(e,t,n[t])}))}return e}({},n);return r[t]=e,r}))};return(0,t.useEffect)((()=>{r(a)}),[a]),n().createElement(n().Fragment,null,n().createElement(M,{context:e,onChange:e=>i(e,"alarmTableAdditional")}),n().createElement(V,{context:e,onChange:e=>i(e,"alarmTableData")}),n().createElement(J,{context:e,onChange:e=>i(e,"alarmTablePaging")}),n().createElement(R,{onChange:e=>i(e,"alarmTableAlarms"),alarmTable:null===(o=e.options)||void 0===o?void 0:o.alarmTable}))},X=new e.PanelPlugin((o=>{var l,i,c,s,u,d,p,v,f,b,m,g,j,E,O,P;const A=(0,t.useRef)([]),{state:C,setState:M,rowClicked:z,soloIndex:N}=(e=>{const[n,r]=(0,t.useState)({indexes:[],lastClicked:-1}),[o,a]=(0,t.useState)(-1),l=e=>[...e].map((()=>!1));return{state:n,setState:r,clearIndexes:l,rowClicked:(e,t,n=!1)=>{r((r=>{let o=[...r.indexes];if(n&&o.some((e=>!0===e))||t.shiftKey&&-1!==r.lastClicked)if(n)n&&e>=0&&r.indexes.filter((e=>!0===e)).length<2&&(o=l(o),o[e]=!0,a(e));else{let{start:t,end:n}=r.lastClicked>e?{start:e,end:r.lastClicked}:{start:r.lastClicked,end:e};for(let e=t;e<=n;e++)o[e]=!0;a(-1)}else t.ctrlKey||(o=l(o)),o[e]=!o[e],a(e),2===t.detail&&G(!0);return{indexes:o,lastClicked:e}}))},soloIndex:o}})(),{client:I}=T(null===(l=o.data)||void 0===l||null===(i=l.request)||void 0===i||null===(c=i.targets)||void 0===c||null===(s=c[0])||void 0===s?void 0:s.datasource),{filteredProps:D,page:F,setPage:L,totalPages:U}=((n,r)=>{var o,a,l;const[i,c]=(0,t.useState)(x()(n)),[s,u]=(0,t.useState)(1),[d,p]=(0,t.useState)(0);return(0,t.useEffect)((()=>{var t,o;if(!n||!n.fields||!n.fields.length)return;const a=x()(n),l=a.fields[0].values.length,i=Number((null===(t=r.alarmTablePaging)||void 0===t?void 0:t.rowsPerPage)||10);if(a&&(null===(o=a.meta)||void 0===o?void 0:o.entity_metadata)&&a.name&&"alarms"===a.name){var u,d;if(1===(null==r||null===(u=r.alarmTableAlarms)||void 0===u||null===(d=u.styleWithSeverity)||void 0===d?void 0:d.value)&&(a.fields=a.fields.map((e=>("Severity"===e.name&&(e.config.custom={displayMode:"color-background"}),e)))),a.fields=a.fields.filter((e=>{let t=!0;var n;return(null==r?void 0:r.alarmTableData)&&(t=!!(null===(n=null==r?void 0:r.alarmTableData.columns)||void 0===n?void 0:n.find((t=>t.label===e.name)))),t})),a.fields=a.fields.sort(((e,t)=>{var n,o,a,l;return(null==r||null===(n=r.alarmTableData)||void 0===n||null===(o=n.columns)||void 0===o?void 0:o.findIndex((t=>t.label===e.name)))-(null==r||null===(a=r.alarmTableData)||void 0===a||null===(l=a.columns)||void 0===l?void 0:l.findIndex((e=>e.label===t.name)))})),i>0&&l>i){var v;const t=s;a.fields=a.fields.map((n=>{const r=[...n.values.buffer],o=(t-1)*i,a=o+i,l=r.splice(o,a);return n.values=new e.ArrayVector(l),n})),a.length=(null===(v=a.fields[0])||void 0===v?void 0:v.values.length)||0}else a.length=l;c(a),p(Math.ceil(l/i))}}),[null==r?void 0:r.alarmTableData,s,null===(o=r.alarmTablePaging)||void 0===o?void 0:o.rowsPerPage,n,null==r||null===(a=r.alarmTableAlarms)||void 0===a?void 0:a.styleWithSeverity]),(0,t.useEffect)((()=>{var e;const t=document.querySelector(".scroll .scrollbar-view");(null==r||null===(e=r.alarmTablePaging)||void 0===e?void 0:e.scroll)?null==t||t.classList.remove("no-scroll"):null==t||t.classList.add("no-scroll")}),[null==r||null===(l=r.alarmTablePaging)||void 0===l?void 0:l.scroll]),{filteredProps:i,page:s,setPage:u,totalPages:d}})(null==o||null===(u=o.data)||void 0===u?void 0:u.series[0],null==o||null===(d=o.options)||void 0===d?void 0:d.alarmTable),{table:B,menu:R,menuOpen:$,setMenuOpen:W}=((e,n,r,o)=>{const[a,l]=(0,t.useState)({x:0,y:0}),[i,c]=(0,t.useState)(!1),s=(0,t.useRef)(null),u=(e,t)=>{t.preventDefault(),e>=0&&n(e,t,!0),l({x:t.x,y:t.y}),c((()=>!0))},d=e=>{var t;const n=e.parentElement,r=null===(t=s.current)||void 0===t?void 0:t.querySelectorAll('.table-body div[role="row"]');let o=-1;if(r&&r.length)for(let e=0;e<r.length;e++)if(r[e]===n){o=e;break}return o},p=t=>{const r=d(t.target);if(r>=0)n(r,t,!1);else{const t=e.current.map((e=>!1));o({indexes:t,lastClicked:-1})}},v=t=>{const n=d(t.target);n>=0?u(n,t):e.current.length>0&&e.current.some((e=>!0===e))&&u(-1,t)};return(0,t.useEffect)((()=>{var e,t;const n=s.current;return null===(e=s.current)||void 0===e||e.addEventListener("click",p),null===(t=s.current)||void 0===t||t.addEventListener("contextmenu",v),()=>{null==n||n.removeEventListener("click",p),null==n||n.removeEventListener("contextmenu",v)}}),[s.current]),(0,t.useEffect)((()=>{(()=>{var e;const t=null===(e=s.current)||void 0===e?void 0:e.querySelector('div[role="rowgroup"] + div');null==t||t.classList.add("table-body")})()}),[a,i,n,r]),{table:s,menu:a,menuOpen:i,setMenu:l,setMenuOpen:c}})(A,z,D,M),{actions:q,detailsModal:V,setDetailsModal:G}=w(C.indexes,(null==o||null===(p=o.data)||void 0===p||null===(v=p.series)||void 0===v||null===(f=v[0])||void 0===f?void 0:f.fields)||[],(()=>W(!1)),(null==o||null===(b=o.options)||void 0===b||null===(m=b.alarmTable)||void 0===m||null===(g=m.alarmTableAdditional)||void 0===g?void 0:g.useGrafanaUser)||!1,I),{tabActive:K,tabClick:J,resetTabs:H}=(()=>{const[e,n]=(0,t.useState)(0);return{tabActive:e,tabClick:e=>{n(e)},resetTabs:()=>{n(0)}}})(),{alarm:Q,goToAlarm:X,alarmQuery:Y}=k(null==o||null===(j=o.data)||void 0===j?void 0:j.series,N,I);return((e,n)=>{(0,t.useEffect)((()=>{var t;const r=null===(t=n.current)||void 0===t?void 0:t.querySelectorAll('.table-body div[role="row"]');r&&r.forEach(((t,n)=>{t.classList.remove("select-start"),t.classList.remove("select-continue"),t.classList.remove("select-end"),!e.indexes[n-1]&&e.indexes[n]&&t.classList.add("select-start"),e.indexes[n-1]&&e.indexes[n]&&e.indexes[n+1]&&t.classList.add("select-continue"),e.indexes[n]&&!e.indexes[n+1]&&t.classList.add("select-end")}))}))})(C,B),((n,r,o)=>{var a,l;const i=(null===(a=null==o?void 0:o.alarmTable.alarmTableAlarms)||void 0===a||null===(l=a.severityTheme)||void 0===l?void 0:l.value)||0;(0,t.useEffect)((()=>{const t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){_(e,t,n[t])}))}return e}({},n);5!==i&&(t.defaults.mappings=[{type:e.MappingType.ValueToText,options:{INDETERMINATE:{color:S[i][0],index:0,text:"Indeterminate"}}},{type:e.MappingType.ValueToText,options:{CLEARED:{color:S[i][1],index:1,text:"Cleared"}}},{type:e.MappingType.ValueToText,options:{NORMAL:{color:S[i][2],index:2,text:"Normal"}}},{type:e.MappingType.ValueToText,options:{WARNING:{color:S[i][3],index:3,text:"Warning"}}},{type:e.MappingType.ValueToText,options:{MINOR:{color:S[i][4],index:4,text:"Minor"}}},{type:e.MappingType.ValueToText,options:{MAJOR:{color:S[i][5],index:5,text:"Major"}}},{type:e.MappingType.ValueToText,options:{CRITICAL:{color:S[i][6],index:6,text:"Critical"}}}],r(t))}),[i])})(o.fieldConfig,o.onFieldConfigChange,o.options),(0,t.useEffect)((()=>{A.current=C.indexes}),[C]),n().createElement("div",{ref:B,className:`\n            ${Y?"alarm-query":"non-alarm-query"}\n            ${(null===(E=o.options)||void 0===E||null===(O=E.alarmTable)||void 0===O||null===(P=O.alarmTablePaging)||void 0===P?void 0:P.scroll)?"scroll":"no-scroll"}\n            ${(()=>{var e,t,n,r;const a=null===(e=o.options)||void 0===e||null===(t=e.alarmTable)||void 0===t||null===(n=t.alarmTablePaging)||void 0===n||null===(r=n.fontSize)||void 0===r?void 0:r.value;return a?`font-size-${a}`:""})()}\n            `},n().createElement(h,null),n().createElement("div",{style:{height:"90%"}},Y?n().createElement(r.Table,{data:D,width:o.width,height:o.height}):n().createElement("div",null,"Select the Entity Datasource below, and choose an Alarm query to see results.")),n().createElement("div",{style:{width:"100%",height:"10%"}},n().createElement("div",null,n().createElement(r.Pagination,{numberOfPages:U===1/0?0:U,currentPage:F,onNavigate:e=>{L(e)},hideWhenSinglePage:!0}))),$&&n().createElement(r.ContextMenu,{x:R.x,y:R.y,onClose:()=>{H(),W(!1)},renderMenuItems:()=>n().createElement(a,{state:C,actions:q})}),n().createElement(r.Modal,{isOpen:V,title:"Alarm Detail",onDismiss:()=>G(!1)},n().createElement(r.Button,{style:{marginBottom:12},onClick:X},n().createElement("i",{className:"fa fa-external-link"})," Full Details"),n().createElement(r.TabsBar,null,n().createElement(r.Tab,{label:"Overview",active:0===K,onChangeTab:()=>J(0)}),n().createElement(r.Tab,{label:"Memos",active:1===K,onChangeTab:()=>J(1)}),n().createElement(r.Tab,{label:"JSON",active:2===K,onChangeTab:()=>J(2)})),n().createElement(r.TabContent,null,n().createElement(y,{tab:K,alarm:Q,client:I}))))}));X.useFieldConfig(),X.setPanelOptions((e=>{e.addCustomEditor({id:"alarm-table-options",path:"alarmTable",name:"",editor:Q})}))})(),c})()));
//# sourceMappingURL=module.js.map