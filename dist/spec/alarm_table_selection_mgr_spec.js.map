{"version":3,"sources":["../../src/spec/alarm_table_selection_mgr_spec.js"],"names":["_","SelectionMgr","describe","currentSelection","mgr","beforeEach","from","to","range","getSelectedRows","expect","have","length","it","handleRowClick","eql","source","index","isRowSelected","equal"],"mappings":"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","file":"alarm_table_selection_mgr_spec.js","sourcesContent":["import _ from 'lodash';\nimport {SelectionMgr} from '../panels/alarm-table/selection_mgr';\n\ndescribe('Selection Manager', function() {\n  let currentSelection;\n  let mgr;\n\n  beforeEach(function() {\n    currentSelection = [];\n    mgr = new SelectionMgr(\n      (from, to) => _.range(from, to + 1),\n      () => {currentSelection = mgr.getSelectedRows();}\n      );\n    expect(mgr.getSelectedRows()).to.have.length(0);\n  });\n\n  describe('clicks without ctrl or shift', function() {\n    it('should change the selected row', function() {\n      mgr.handleRowClick(1, false, false);\n      expect(currentSelection).to.eql([1]);\n      mgr.handleRowClick(2, false, false);\n      expect(currentSelection).to.eql([2]);\n    });\n  });\n\n  describe('clicks with ctrl and without shift', function() {\n    it('should add rows to the current selection', function() {\n      mgr.handleRowClick(1, true, false);\n      expect(currentSelection).to.eql([1]);\n      mgr.handleRowClick(2, true, false);\n      expect(currentSelection).to.eql([1,2]);\n      mgr.handleRowClick(5, true, false);\n      expect(currentSelection).to.eql([1,2,5]);\n    });\n\n    it('should reset the selection when ctrl is not pressed', function() {\n      mgr.handleRowClick(1, true, false);\n      expect(currentSelection).to.eql([1]);\n      mgr.handleRowClick(2, true, false);\n      expect(currentSelection).to.eql([1,2]);\n      mgr.handleRowClick(5, false, false);\n      expect(currentSelection).to.eql([5]);\n    });\n  });\n\n  describe('clicks with shift and without ctrl', function() {\n    it('should select the range', function() {\n      mgr.handleRowClick(1, false, false);\n      expect(currentSelection).to.eql([1]);\n      mgr.handleRowClick(5, false, true);\n      expect(currentSelection).to.eql([1,2,3,4,5]);\n    });\n  });\n\n  describe('clicks with shift and with ctrl', function() {\n    it('should add rows to the current selection', function() {\n      mgr.handleRowClick(1, true, false);\n      expect(currentSelection).to.eql([1]);\n      mgr.handleRowClick(10, true, false);\n      expect(currentSelection).to.eql([1,10]);\n      mgr.handleRowClick(15, true, true);\n      expect(currentSelection).to.eql([1,10,11,12,13,14,15]);\n    });\n\n    it('should reset the selection when ctrl is not pressed', function() {\n      mgr.handleRowClick(1, true, false);\n      expect(currentSelection).to.eql([1]);\n      mgr.handleRowClick(10, true, false);\n      expect(currentSelection).to.eql([1,10]);\n      mgr.handleRowClick(15, true, true);\n      expect(currentSelection).to.eql([1,10,11,12,13,14,15]);\n      mgr.handleRowClick(17, false, true);\n      expect(currentSelection).to.eql([15,16,17]);\n    });\n  });\n\n  describe('selection', function() {\n    it('should support objects', function() {\n      mgr.handleRowClick({source: 'a', index: 1}, false, false);\n      expect(currentSelection).to.eql([{source: 'a', index: 1}]);\n      expect(mgr.isRowSelected({source: 'a', index: 1})).to.equal(true);\n    });\n  });\n\n});\n"]}