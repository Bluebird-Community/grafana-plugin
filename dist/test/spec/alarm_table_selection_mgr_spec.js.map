{"version":3,"sources":["../../../src/spec/alarm_table_selection_mgr_spec.js"],"names":["describe","currentSelection","mgr","beforeEach","from","to","range","getSelectedRows","expect","have","length","it","handleRowClick","eql","source","index","isRowSelected","equal"],"mappings":"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","file":"alarm_table_selection_mgr_spec.js","sourcesContent":["import _ from 'lodash';\nimport {SelectionMgr} from '../panels/alarm-table/selection_mgr';\n\ndescribe('Selection Manager', function() {\n  let currentSelection;\n  let mgr;\n\n  beforeEach(function() {\n    currentSelection = [];\n    mgr = new SelectionMgr(\n      (from, to) => _.range(from, to + 1),\n      () => {currentSelection = mgr.getSelectedRows();}\n      );\n    expect(mgr.getSelectedRows()).to.have.length(0);\n  });\n\n  describe('clicks without ctrl or shift', function() {\n    it('should change the selected row', function() {\n      mgr.handleRowClick(1, false, false);\n      expect(currentSelection).to.eql([1]);\n      mgr.handleRowClick(2, false, false);\n      expect(currentSelection).to.eql([2]);\n    });\n  });\n\n  describe('clicks with ctrl and without shift', function() {\n    it('should add rows to the current selection', function() {\n      mgr.handleRowClick(1, true, false);\n      expect(currentSelection).to.eql([1]);\n      mgr.handleRowClick(2, true, false);\n      expect(currentSelection).to.eql([1,2]);\n      mgr.handleRowClick(5, true, false);\n      expect(currentSelection).to.eql([1,2,5]);\n    });\n\n    it('should reset the selection when ctrl is not pressed', function() {\n      mgr.handleRowClick(1, true, false);\n      expect(currentSelection).to.eql([1]);\n      mgr.handleRowClick(2, true, false);\n      expect(currentSelection).to.eql([1,2]);\n      mgr.handleRowClick(5, false, false);\n      expect(currentSelection).to.eql([5]);\n    });\n  });\n\n  describe('clicks with shift and without ctrl', function() {\n    it('should select the range', function() {\n      mgr.handleRowClick(1, false, false);\n      expect(currentSelection).to.eql([1]);\n      mgr.handleRowClick(5, false, true);\n      expect(currentSelection).to.eql([1,2,3,4,5]);\n    });\n  });\n\n  describe('clicks with shift and with ctrl', function() {\n    it('should add rows to the current selection', function() {\n      mgr.handleRowClick(1, true, false);\n      expect(currentSelection).to.eql([1]);\n      mgr.handleRowClick(10, true, false);\n      expect(currentSelection).to.eql([1,10]);\n      mgr.handleRowClick(15, true, true);\n      expect(currentSelection).to.eql([1,10,11,12,13,14,15]);\n    });\n\n    it('should reset the selection when ctrl is not pressed', function() {\n      mgr.handleRowClick(1, true, false);\n      expect(currentSelection).to.eql([1]);\n      mgr.handleRowClick(10, true, false);\n      expect(currentSelection).to.eql([1,10]);\n      mgr.handleRowClick(15, true, true);\n      expect(currentSelection).to.eql([1,10,11,12,13,14,15]);\n      mgr.handleRowClick(17, false, true);\n      expect(currentSelection).to.eql([15,16,17]);\n    });\n  });\n\n  describe('selection', function() {\n    it('should support objects', function() {\n      mgr.handleRowClick({source: 'a', index: 1}, false, false);\n      expect(currentSelection).to.eql([{source: 'a', index: 1}]);\n      expect(mgr.isRowSelected({source: 'a', index: 1})).to.equal(true);\n    });\n  });\n\n});\n"]}